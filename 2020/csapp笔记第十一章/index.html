<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="Phi">
  
  
  
  <link rel="prev" href="https://philyc.github.io/2020/csapp%E7%AC%94%E8%AE%B0%E7%AC%AC%E5%8D%81%E7%AB%A0/" />
  <link rel="next" href="https://philyc.github.io/2020/csapp%E7%AC%94%E8%AE%B0%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0/" />
  <link rel="canonical" href="https://philyc.github.io/2020/csapp%E7%AC%94%E8%AE%B0%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           《CSAPP》笔记——第十一章 | Phi&#39;s Blog
       
  </title>
  <meta name="title" content="《CSAPP》笔记——第十一章 | Phi&#39;s Blog">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/philyc.github.io\/"
    },
    "articleSection" : "posts",
    "name" : "《CSAPP》笔记——第十一章",
    "headline" : "《CSAPP》笔记——第十一章",
    "description" : "CSAPP Reading notes-chapter 10.",
    "inLanguage" : "zh-cn",
    "author" : "Phi",
    "creator" : "Phi",
    "publisher": "Phi",
    "accountablePerson" : "Phi",
    "copyrightHolder" : "Phi",
    "copyrightYear" : "2020",
    "datePublished": "2020-03-17 16:17:32 \x2b0800 CST",
    "dateModified" : "2020-03-17 16:17:32 \x2b0800 CST",
    "url" : "https:\/\/philyc.github.io\/2020\/csapp%E7%AC%94%E8%AE%B0%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0\/",
    "wordCount" : "1611",
    "keywords" : [ "CSAPP","Reading notes", "Phi\x27s Blog"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://philyc.github.io/">Phi&#39;s Blog</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="" title=""></a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://philyc.github.io/">Phi&#39;s Blog</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="" title=""></a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">《CSAPP》笔记——第十一章</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://philyc.github.io/" rel="author">Phi</a> with ♥ 
                <span class="post-time">
                on <time datetime=2020-03-17 itemprop="datePublished">March 17, 2020</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://philyc.github.io/categories/book/"> Book </a>
                        
                </span>
        </div>
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          <h1 id="1">1,网络编程</h1>
<ul>
<li>
<p>每个网络应用程序都是基于 <strong>客户端 - 服务器</strong> 模型的，一个应用是由一个服务器进程和一个或多个客户端进程组成</p>
</li>
<li>
<p>客户端-服务器模型中的基本操作是 <strong>事务</strong> ，一个客户端-服务器事务由四步组成</p>
</li>
</ul>
<ol>
<li>客户端需要服务的时候，向服务器发送请求，发送一个事务</li>
<li>服务器收到请求后，解释它，并以适当方式操作它的资源</li>
<li>服务器给客户端发送一个响应，并等待下一个请求</li>
<li>客户端收到响应并处理它</li>
</ol>
<ul>
<li>一个客户端运行在主机A上，主机A与LAN1相连，它发送了一串数据字节到运行在主机B上的服务器端，主机B则连接在LAN2上，步骤如下</li>
</ul>
<ol>
<li>
<p>运行在主机A上的客户端进行系统调用，从客户端的虚拟地址空间拷贝到内核缓冲区</p>
</li>
<li>
<p>主机A上的协议软件通过在数据前附加互联网络 <strong>包头</strong> 和 <strong>LAN1帧头</strong> ，创建了一个LAN1的帧（互联网<strong>包头</strong>寻址到互联网主机B，<strong>LAN1帧头</strong>寻址到路由器，LAN1帧的有效载荷是互联网络包，互联网络包的有效载荷是实际的用户数据）</p>
</li>
<li>
<p>LAN1适配器拷贝该帧到网络上</p>
</li>
<li>
<p>帧到达路由器，路由器的LAN1适配器从电缆上读取它，并传送到协议软件中</p>
</li>
<li>
<p>路由器从互联网包头中提取处目的互联网络地址，用它作为路由器的索引，确定向哪里转发这个包（路由器剥落旧的LAN1的帧头，加上寻址到主机B的新的LAN2帧头，并把得到的帧传送到适配器）</p>
</li>
<li>
<p>路由器的LAN2适配器拷贝该帧到网络</p>
</li>
<li>
<p>帧到达主机B时，它的适配器从电缆上读到此帧，并将它传送到协议软件</p>
</li>
<li>
<p>主机B上的协议软件剥落包头和帧头。服务器进行一个读取这些数据的系统调用</p>
</li>
</ol>
<h1 id="2tcpip">2.TCP/IP</h1>
<ul>
<li><strong>IP</strong></li>
</ul>
<ol>
<li>基本的命名方法和递送机制</li>
<li>IPv4和IPv6</li>
<li>最初的互联网协议使用32位地址，称位IPv4，而IPv6有128位地址</li>
<li>IP地址通常以一种点分十进制来表示</li>
</ol>
<ul>
<li><strong>UDP</strong></li>
</ul>
<ol>
<li>不可靠数据报协议</li>
<li>使得包可以在进程间而不是主机间传递</li>
</ol>
<ul>
<li><strong>TCP</strong></li>
</ul>
<ol>
<li>提供进程间可靠的双向链接</li>
</ol>
<ul>
<li><strong>域名</strong></li>
</ul>
<ol>
<li>从后往前解析</li>
<li>通过DNS分布式数据库来维护</li>
<li>将IP地址与域名映射</li>
<li>一个IP地址可以映射到多个域名，一个域名也可以映射到多个IP地址</li>
<li>每个主机都有本地域名localhost</li>
</ol>
<h1 id="3socket">3.Socket</h1>
<ul>
<li><strong>套接字</strong> 是连接的一个端点，每个套接字都有相应的套接字地址</li>
</ul>
<ol>
<li>
<p>是由一个IP地址和一个16位的整数端口组成的，用地址:端口来表示。</p>
</li>
<li>
<p>当客户端发起一个连接请求时，客户端套接字地址中的端口由内核自动分配的，称为临时端口</p>
</li>
<li>
<p>服务器套接字地址中的端口通常是某个知名的端口，和这个服务相对应</p>
</li>
<li>
<p>例如：Web服务器通常使用端口80，电子邮件服务器使用端口25</p>
</li>
<li>
<p>在Unix机器上，文件/etc/services 包含一张这台机器提供的服务和他们的知名端口号的综合列表</p>
</li>
<li>
<p>一个连接是由它两端的套接字地址唯一确定的，这对套接字地址叫做套接字对，由下列元组来表示:(cliaddr:cliport,servaddr:servport)</p>
</li>
</ol>
<p><img src="https://github.com/philyc/philyc.github.io/blob/master/img/chapter11_SocketInterface.png" alt="SocketInterface"></p>
<ol>
<li>服务器和客户端都调用socket函数创建文件描述符</li>
<li>服务器调用bind函数准备连接</li>
<li>由于默认socket描述符用于客户端，服务器调用listen函数将其转变为监听描述符，这个描述符服务器自开机运行只创建一次</li>
<li>服务器调用accept函数等待请求到达，返回已连接描述符，这个描述符<strong>每当一个服务器和客户端连接就创建一个</strong> ，区分监听和已连接的目的是创建并发服务器，同时处理多个客户端</li>
<li>客户端调用connect函数准备连接，打开clientfd描述符</li>
<li>当客户端断开后，将会向服务器发送EOF结束符，服务器收到后关闭，EOF实质上不是一个字符，而是一个内核检测的条件</li>
</ol>
<h1 id="4http">4.HTTP事务</h1>
<ul>
<li>一个 <strong>HTTP请求</strong> 由：一个请求行、后跟随0个或多个请求报文，再跟随空文本行终止报头列表</li>
</ul>
<ol>
<li>首先要连接服务器和客户端</li>
<li>格式：method URI version</li>
<li>method一般为 GET</li>
<li>URI为URL端口后面的部分</li>
<li>version为HTTP版本</li>
</ol>
<table>
<thead>
<tr>
<th>状态代码</th>
<th>状态消息</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>成功</td>
<td>处理请求无误</td>
</tr>
<tr>
<td>301</td>
<td>永久移动</td>
<td>内容已移动在location头指名的主机</td>
</tr>
<tr>
<td>400</td>
<td>错误请求</td>
<td>服务器不能理解请求</td>
</tr>
<tr>
<td>403</td>
<td>禁止</td>
<td>服务器无权访问所请求文件</td>
</tr>
<tr>
<td>404</td>
<td>未发现</td>
<td>服务器不能找到所请求文件</td>
</tr>
<tr>
<td>501</td>
<td>未实现</td>
<td>服务器不支持请求方法</td>
</tr>
<tr>
<td>505</td>
<td>HTTP版本不支持</td>
<td>服务器不支持请求版本</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Tiny Web服务器</strong></li>
</ul>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Phi </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://philyc.github.io/2020/csapp%E7%AC%94%E8%AE%B0%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0/>https://philyc.github.io/2020/csapp%E7%AC%94%E8%AE%B0%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://philyc.github.io/tags/csapp/">
                    #CSAPP</a></span>
            
            <span class="tag"><a href="https://philyc.github.io/tags/reading-notes/">
                    #Reading notes</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="https://philyc.github.io/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://philyc.github.io/2020/csapp%E7%AC%94%E8%AE%B0%E7%AC%AC%E5%8D%81%E7%AB%A0/" class="prev" rel="prev" title="《CSAPP》笔记——第十章"><i class="iconfont icon-left"></i>&nbsp;《CSAPP》笔记——第十章</a>
         
        
        <a href="https://philyc.github.io/2020/csapp%E7%AC%94%E8%AE%B0%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0/" class="next" rel="next" title="《CSAPP》笔记——第十二章">《CSAPP》笔记——第十二章&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2020</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://philyc.github.io/">Phi</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  



     </div>
  </body>
</html>
